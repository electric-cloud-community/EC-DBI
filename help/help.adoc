Plugin Version @PLUGIN_VERSION@
Revised on July 1, 2015


== Perl DBI links

More information can be found at http://dbi.perl.org/[this website].

== Perl DBD links

Perl DBD modules can be found at http://search.cpan.org/[this website].

[[setupconfig]]
== Setting up the plugin configuration

IMPORTANT: For all parameter descriptions below, required parameters are shown in [.required]#bold italics#.

IMPORTANT: In the {CD} UI, go to the *Home* page, open the Main Menu, and click menu:Admin[Plugins] to open the Plugin Manager.

Plugin configurations are sets of parameters that apply across some or all of the plugin's procedures. They reduce repetition of common values, create predefined sets of parameters for end users, and securely store credentials where needed. Each configuration is given a unique name that is entered in designated parameters on procedures that use them.

To create a plugin configuration, go to the {CD} "Administration" tab, then to the "Plugins" subtab. On the right side of the line for the specific plugin, click the "Configure" link to open the Configuration page.

== Plugin configuration parameters

[cols=",",options="header",]
|===
|Parameter |Description
|Configuration Name |Provide a unique name for the configuration. (Required)
|User Name |Provide the user login ID for your database connection. (Required)
|Password |Provide the user-specified password. (Required)
|===

[[procedures]]
== Plugin procedures

== ExecuteQuery

This procedure creates a database connection through the Perl DBI module and a Perl DBD module to execute an SQL statement against the corresponding database.

NOTE: You can access any database indirectly by using a preconfigured ODBC.

Additional Perl modules are required for the following databases:

[cols=",,",options="header",]
|===
|Database |Module name |CPAN reference
|Oracle |DBD-Oracle |http://search.cpan.org/~pythian/DBD-Oracle-1.30/Oracle.pm[DBD-Oracle at CPAN]
|SQLite |DBD-SQLite |http://search.cpan.org/~adamk/DBD-SQLite-1.33/lib/DBD/SQLite.pm[DBD-SQLite at CPAN]
|Postgres |DBD-Pg |http://search.cpan.org/dist/DBD-Pg/Pg.pm[DBD-Pg at CPAN]
|===

[cols=",",options="header",]
|===
|Parameter |Description
|Database engine |Choose the database engine you want to connect to. Available options are: SQLServer, MySql, Oracle, Sqlite, Postgres, or an ODBC connection to any database. (Required)
|Database name |The name of the database you want to use. (Required)
|Server |Database server name. (Required)
|Port a|
Database port. Common default ports are:

* 3306 (Mysql)
* 1433 (SQLServer)
* 1521 (Oracle)
* 5432 (Postgres)

|Enable transactions |If checked, this option protects your data in case of errors.
|Display format |Choose a display format. (Required)
|Sql query |The query to run against the database.
|Sql file |Absolute path to a SQL script.
|Configuration name |Name of the configuration that contains the database user and password. (Required)
|Result (output property path) |Property name used to store the result of queries.
|===

== BackUpDB

Creates a backup for the specified database.

[width="100%",cols="50%,50%",options="header",]
|===
|Parameter |Description
|Database engine |Choose the database engine you want to connect to. Available options are: SQLServer, MySql, Oracle, Postgres and Sqlite. (Required)
|Command Line Utility a|
Absolute path to a backup command utility. (Required):

* `mysqldump` (Mysql)
* `osql` (SQLServer)
* `exp` (Oracle)
* `pg_dump` (Postgres)

|Database name |The name of the database to back up. (Required)
|Server |Database server name.
|Port a|
Database port. Some of the default ports are:

* 3306 (Mysql)
* 1433 (SQLServer)
* 1521 (Oracle)
* 5432 (Postgres)

|Configuration name |Name of the configuration that contains the database user and password. (Required)
|Name of the backup file |Name of the backup file (without extension). If you leave the field blank, the file name is "backup".
|Destination path |The path where you want to store your backup file. (Required)
|===

[[example]]
== Examples and use cases

The following example shows how to create a configuration:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-1.png[image]

The following example shows a list of server configurations:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-2.png[image]

The following example shows a completed ExecuteQuery parameter form:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-3.png[image]

The following example shows output for ExecuteQuery:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-4.png[image]

The following example shows a completed MySql backup parameter form:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-5.png[image]

The following example shows output for a MySQL backup:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-6.png[image]

The following example shows a completed Oracle backup parameter form:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-7.png[image]

The following example shows output for an Oracle backup:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-8.png[image]

The following example shows a completed SQL Server backup parameter form:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-9.png[image]

The following example shows output for a SQL Server backup:

image::cloudbees-common::cd-plugins/ec-dbi/dbi-10.png[image]

[[rns]]
== Release notes

=== EC-DBI 2.0.4

* The documentation has been migrated to the main documentation site.

=== EC-DBI 2.0.3

* Added metadata that is required for 9.0 release.

=== EC-DBI 2.0.2

* Fixed issue with configurations being cached for IE.

=== EC-DBI 2.0.1

* ElectricCommander was renamed to {CD}.

=== EC-DBI 2.0.0

* The result (output property path) parameter was added.
* JSON and XML formats for results were added.

=== EC-DBI 1.0.2

* Procedure names were changed in the step picker section.

=== EC-DBI 1.0.1

* XML parameter panels were added.
* The Help page was updated.

=== EC-DBI 1.0.0

* Initial release.
